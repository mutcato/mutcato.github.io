<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="mutlucan" />
    <meta name="generator" content="Pelican (VoidyBootstrap theme)" />

    <title>Build An Extraordinary Slack Bot With Test Driven Development Approach - Things that i have learned</title>

   
        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
              integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
              crossorigin="anonymous" />
      <link rel="stylesheet"
            href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
            integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
            crossorigin="anonymous">


      <link rel="stylesheet" href="/theme/css/pygment.css" />
      <link rel="stylesheet" href="/theme/css/voidybootstrap.css" />

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js" integrity="sha384-FFgGfda92tXC8nCNOxrCQ3R8x1TNkMFqDZVQdDaaJiiVbjkPBXIJBx0o7ETjy8Bh" crossorigin="anonymous"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js" integrity="sha384-ZoaMbDF+4LeFxg6WdScQ9nnR1QC2MIRxA1O9KWEXQwns1G8UNyIEZIQidzb0T1fo" crossorigin="anonymous"></script>
    <![endif]-->

    <link rel="shortcut icon" href="/favicon.ico" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36295151-11', '');
  ga('send', 'pageview');

</script>
  </head>

  <body>
   
    <nav class="navbar navbar-default">
      <div class="container">
	   <div class="navbar-header">
		<button type="button" class="navbar-toggle" 
				data-toggle="collapse" data-target="#main-navbar-collapse">
		  <span class="sr-only">Toggle navigation</span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		  <span class="icon-bar"></span>
		</button>
		<a class="navbar-brand" href="/" rel="home">
          <i class="fas fa-home fa-fw fa-lg"> </i> </a>
       </div>

      <div class="collapse navbar-collapse" id="main-navbar-collapse">
        <ul class="nav navbar-nav">
            <li class="divider"></li>
            <li class="">
              <a href="/archives.html">Archives</a>
            </li>
          <li class="divider"></li>
        </ul> <!-- /nav -->
      </div> <!-- /navbar-collapse -->
	  </div> <!-- /container -->
    </nav> <!-- /navbar -->

	<div class="jumbotron" id="overview">
	  <div class="container">
		<h1><a href="/">Things that i have learned</a></h1>
		<p class="lead">Geeky things that makes me happy</p>
	  </div>
	</div>

    <div class="container" id="main-container">
      <div class="row">
        <div class="col-md-9" id="content">
<article itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
  <header class="article-header">
<abbr class="article-header-date">
  Sal 23 Temmuz 2019
</abbr> <h1>
  <a href="/build-an-extraordinary-slack-bot-with-test-driven-development-approach.html" rel="bookmark"
     title="Permalink to Build An Extraordinary Slack Bot With Test Driven Development Approach">
    Build An Extraordinary Slack Bot With Test Driven Development Approach
  </a>
</h1><div class="article-header-info">
  <p>
      Posted by <a href="/author/mutlucan.html">mutlucan</a>
    in 
    <a href="/category/programming.html">
      Programming</a>
    &nbsp;&nbsp;
  </p>
</div> <!-- /.article-header-info -->  </header>
  <div class="content-body" itemprop="text articleBody">
	<h2>Introduction</h2>

<p>
Slack is modern MIRC. MIRC for bussiness. 
If anybody doesn't know MIRC, then I say Slack is Whatsapp groups. 
But it is different from Whatsapp.
It has very uniqe features and cool design ofcourse. Beyond it's nifty design Slack gets it's real power from it's apps.
There is a lot of Slack apps and bots which makes collabration with other apps and automates booring office jobs.
For example, if your project gets a new commit from Github you can make Slack send you a notification about that commit.

Like Facebook Apps. Everybody can develop a small Slack app which enhances it's existing power. 
</p>

<p>
Now I will develop a small Slack bot who repeats your posts in some particular times. 
Somebody told me a learning technik
when I was in elementary or high school. I don't remember. The technik was about repetition. 
If you repeat something that you have just learned after 12 hours It will remain in your memory for 2 days.
If you review it after 2 days following your first review, It will remain with you for a week more. 
If you review It after a week, It will stay with you for a year. I am not sure the time periods but the principle is
 about increasing time intervals between each repetition. Now the bot which makes you review your post after 4 hours, 12 hours and 4 days.
Name wil be reinforceme and serving under <a href="https://reinforceme.slack.com">Reinforceme</a> workspace.
</p>

<ul>

<h2>Create your Slack Bot on Slack Platform</h2>
Go to https://api.slack.com/ site and click create button

<img style="max-width: 800px" src="https://i.imgur.com/0ChlYXr.png"> 

<p>Then create a bot</p>
<img style="max-width: 800px" src="https://i.imgur.com/QwTVNVR.png">

<img style="max-width: 800px" src="https://i.imgur.com/3PGXAK4.png">

<img style="max-width: 800px" alt="Show always online" src="https://i.imgur.com/9sK11fc.png">
<p>I want my bot always shown online. But you may want your bot shown only RTM(Real Time Messaging) API is used.
There is three kind of apis. Web API, Events API and Real Time Messaging (RTM) API. Some events works only with some API's.
For example; sending a hello message a user when s/he connected to a channel requires RTM API. However sending direct messages requires 
EVENTS API. Which event needs which api. All list is <a href="https://api.slack.com/events">here</a>. BTW event is a kind of action
 which triggers some API methods. Like joining a channel, sending a message to a channel, posting a link inside the message, 
 putting a star to a message or removing a star from a message, putting an emoji into the message. 
 I am not kidding. You can trace whether a user puts an emoji in the message :)</p>

<img style="max-width: 800px" alt="Install the APP to yout team" src="https://i.imgur.com/f2wodBE.png">
<img style="max-width: 800px; min-width: 600px" alt="APP scopes" src="https://i.imgur.com/CZSCRgL.gif">
<p>Then you need to give some permissions(scopes). I give there user:read and user:read:email permissions. Then you need to reinstall your app.</p>

<h2>Lets Code</h2>
<p>Do I really need to do It in test driven development?</p>
<p>Well, not really. But I love the hard way :)</p>
<p>As well as I am a hard loving person, TDD has despisible benefits on developing process. Such as; making the code 
more modular, more maintenable. It makes developer well understand their own code.</p> 

<p>
We develop in TDD approach. Then, firstly we start coding test file. 
</p>

    #!python
    from slack_bot import *
    import pytest
    import time;

    input = {'text': 'Hello my awesome bot', 'user': 'UH47MU0GN','ts': str(time.time())}
    @pytest.mark.skip(reason = "Fully implemented.")
    def test_post_instant_message():
        assert post_instant_message(channel_id="UH47MU0GN", text="Naber Lan")

    def test_get_ws_users():
        users = get_ws_users()
        for user in users:
            print(user["name"])

    def test_get_BotID():
        assert get_BotID("reinforceme") == "UL4UGDCBU"

    @pytest.mark.skip(reason = "Not fully implemented.")
    def test_slackReadRTM():
        assert slackReadRTM()

    def test_post_scheduled_message():
        assert post_scheduled_message(input,20)

<p>
Then we exported our SLACK_BOT_TOKEN as environmental variable. Never use sensitive data(passwords, tokens etc.) directly in your code. 
It is not a good practice. You can push your code to a git server with theese sensitive data.
</p>

.. code-block:: python
    print("Pelican is a static site generator.")

<p>
I use Ubuntu 18.04 Virtual Box in my Windows 10 machine. So, change the "xoxb..." with yours and put the export code below to your CLI (comand line interface)
</p>

    :::python
    export SLACK_BOT_TOKEN="xoxb....."

<p>
Code above shows the scheme which talked earlier. Animal is superclass. Dog is subclass. Dog class inherits whole Animal class.
It it needs to inherited only a spesific part of the super class we use super( method.
Like super().__init__() method inherits only __init__ function of the superclass
</p>

<p>We have created private properties in __init__ method of the Animal class. These private properties cannot be accessed outside of the class.
I mean running puppy.__height will throw an error. This is called encapsulation which is protecting the data from user. Because some other userdoesn't have to know
the height and weight must be positive. They may be try to set the weight property directly with puppy.__height = -10</p>

<p>Maybe later we will make a library with this classes and some other people will use our library. 
They don't have to know taht weight parameter must be positive. As a developer we have to solve this issue while we developing thelibrary.
 id est We want to prevent the user by encapsulation technik to set or get unwanted properties or parameters.</p>
  </div>
  
<div class="article-tag-list">
<span class="label label-default">Tags</span>
	<a href="/tag/python.html"><i class="fas fa-tag"></i>python</a>&nbsp;
	<a href="/tag/slack.html"><i class="fas fa-tag"></i>slack</a>&nbsp;
	<a href="/tag/tdd.html"><i class="fas fa-tag"></i>tdd</a>&nbsp;
	<a href="/tag/bot.html"><i class="fas fa-tag"></i>bot</a>&nbsp;
</div>  <hr />
  <div class="well well-sm">  <!-- Social media sharing buttons -->

    <!-- Google+ -->
    <div class="g-plus" data-action="share" data-annotation="bubble"></div>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <div class="g-plusone" data-size="medium"></div>&nbsp;

    <!-- Facebook -->
    <div class="fb-like" 
        data-href="/build-an-extraordinary-slack-bot-with-test-driven-development-approach.html" 
        data-layout="button_count" 
        data-action="like" data-show-faces="true" 
        data-share="true">
    </div>
    &nbsp;
  </div> <!-- /Social media sharing buttons -->
</article>
        </div><!-- /content -->

        <div class="col-md-3 sidebar-nav" id="sidebar">

<div class="row">

<div class="col-xs-6 col-md-12">
<h4><i class="fas fa-comment fa-fw fa-lg"></i> Social</h4>
<ul class="list-unstyled social-links">
    <li><a href="https://twitter.com/mcan543" target="_blank">
	  <i class="fab fa-twitter-square fa-fw fa-lg" title="Twitter"></i>
		Twitter
	</a></li>
    <li><a href="http://linkedin.com/in/mutlucan" target="_blank">
	  <i class="fab fa-linkedin fa-fw fa-lg" title="LinkedIn"></i>
		LinkedIn
	</a></li>
    <li><a href="https://github.com/mutcato" target="_blank">
	  <i class="fab fa-github-square fa-fw fa-lg" title="GitHub"></i>
		GitHub
	</a></li>
</ul>
</div>

<div class="col-xs-6 col-md-12">
<h4><i class="fas fa-folder fa-fw fa-lg"></i> Categories</h4>
<ul class="list-unstyled category-links">
  <li><a href="/category/ai.html" >
    <i class="fas fa-folder-open fa-fw fa-lg"></i> AI</a></li>
  <li><a href="/category/data.html" >
    <i class="fas fa-folder-open fa-fw fa-lg"></i> Data</a></li>
  <li><a href="/category/database.html" >
    <i class="fas fa-folder-open fa-fw fa-lg"></i> Database</a></li>
  <li><a href="/category/deep-learning.html" >
    <i class="fas fa-folder-open fa-fw fa-lg"></i> Deep Learning</a></li>
  <li><a href="/category/linux.html" >
    <i class="fas fa-folder-open fa-fw fa-lg"></i> Linux</a></li>
  <li><a href="/category/programming.html" >
    <i class="fas fa-folder-open fa-fw fa-lg"></i> Programming</a></li>
  <li><a href="/category/system.html" >
    <i class="fas fa-folder-open fa-fw fa-lg"></i> System</a></li>
</ul>
</div>

</div> <!-- /row -->

<h4><i class="fas fa-tags fa-fw fa-lg"></i> Tags</h4>
<p class="tag-cloud">
      <a href="/tag/python.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>python
      </a>
      <a href="/tag/mongodb.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>mongodb
      </a>
      <a href="/tag/database.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>database
      </a>
      <a href="/tag/javascript.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>javascript
      </a>
      <a href="/tag/google-apps-script.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>google apps script
      </a>
      <a href="/tag/bot.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>bot
      </a>
      <a href="/tag/scraping.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>scraping
      </a>
      <a href="/tag/email.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>email
      </a>
      <a href="/tag/selenium.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>selenium
      </a>
      <a href="/tag/webdriver.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>webdriver
      </a>
      <a href="/tag/slack.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>slack
      </a>
      <a href="/tag/tdd.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>tdd
      </a>
      <a href="/tag/ai.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>AI
      </a>
      <a href="/tag/nn.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>NN
      </a>
      <a href="/tag/linux.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>linux
      </a>
      <a href="/tag/cli.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>cli
      </a>
      <a href="/tag/sequence-models.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>sequence models
      </a>
      <a href="/tag/lstm.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>lstm
      </a>
      <a href="/tag/nlp.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>nlp
      </a>
      <a href="/tag/ssl.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>ssl
      </a>
      <a href="/tag/raspberrypi.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>raspberrypi
      </a>
      <a href="/tag/ubuntu.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>ubuntu
      </a>
      <a href="/tag/oop.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>OOP
      </a>
      <a href="/tag/data-visualition.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>data visualition
      </a>
      <a href="/tag/pandas.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>pandas
      </a>
      <a href="/tag/kaggle.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>kaggle
      </a>
      <a href="/tag/plotly.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>plotly
      </a>
      <a href="/tag/data.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>data
      </a>
      <a href="/tag/pytorch.html">
        <i class="fas fa-tag fa-fw fa-lg"></i>pytorch
      </a>
</p>

<hr />

        </div><!--/sidebar -->
      </div><!--/row-->
    </div><!--/.container /#main-container -->

    <footer id="site-footer">
 
      <address id="site-colophon">
        <p class="text-center text-muted">
        Site built using <a href="http://getpelican.com/" target="_blank">Pelican</a>
        &nbsp;&bull;&nbsp; Theme based on
        <a href="http://www.voidynullness.net/page/voidy-bootstrap-pelican-theme/"
           target="_blank">VoidyBootstrap</a> by 
        <a href="http://voidynullness.net"
           target="_blank">RKI</a>  
        </p>
      </address><!-- /colophon  -->
    </footer>


    <!-- javascript -->
   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>


<!-- Facebook -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<!-- Twitter -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Google+ -->
<!-- Synchronous 
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
-->
<!-- Asynchronous -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>  </body>
</html>